{{- /* gotype: github.com/goxgen/goxgen/projects/basic.TemplateData*/ -}}

{{- define "BaseTemplate" -}}

// Code generated by github.com/goxgen/goxgen, DO NOT EDIT.

package server

import(
    "github.com/99designs/gqlgen/graphql"
    "github.com/99designs/gqlgen/graphql/handler"
    "context"
    "github.com/goxgen/goxgen/plugins/cli/settings"
    "{{.ParentPackageName}}/{{.Name}}"
    "{{.ParentPackageName}}/{{.Name}}/{{.GeneratedGqlgenPackageName}}"
)

func Server(sts *settings.EnvironmentSettings) (*handler.Server, error){
    resolver, err := {{$.Name}}.NewResolver(sts)
    if err != nil {
        return nil, err
    }

    return handler.NewDefaultServer(
        {{$.GeneratedGqlgenPackageName}}.NewExecutableSchema(
                {{$.GeneratedGqlgenPackageName}}.Config{
                Resolvers:  resolver,
                Directives: {{$.GeneratedGqlgenPackageName}}.DirectiveRoot{
                    ListAction: func(ctx context.Context, obj interface{}, next graphql.Resolver, resource string, action {{$.GeneratedGqlgenPackageName}}.XgenResourceListActionType, route *string, pagination *bool, sort *{{$.GeneratedGqlgenPackageName}}.XgenSortResourceConfigInput, schemaFieldName *string) (res interface{}, err error) {
                        return next(ctx)
                    },
                    Action: func(ctx context.Context, obj interface{}, next graphql.Resolver, resource string, action {{$.GeneratedGqlgenPackageName}}.XgenResourceActionType, route *string, schemaFieldName *string) (res interface{}, err error) {
                        return next(ctx)
                    },
                    Resource: func(ctx context.Context, obj interface{}, next graphql.Resolver, name string, route *string, primary *bool, db *{{$.GeneratedGqlgenPackageName}}.XgenResourceDbConfigInput) (res interface{}, err error) {
                        return next(ctx)
                    },
                    ActionField: func(ctx context.Context, obj interface{}, next graphql.Resolver, label *string, description *string, resourceMap []string) (res interface{}, err error) {
                        return next(ctx)
                    },
                    Field: func(ctx context.Context, obj interface{}, next graphql.Resolver, label *string, description *string, db *{{$.GeneratedGqlgenPackageName}}.XgenResourceFieldDbConfigInput) (res interface{}, err error) {
                        return next(ctx)
                    },
                },
            },
        ),
    ), nil
}

{{ end }}